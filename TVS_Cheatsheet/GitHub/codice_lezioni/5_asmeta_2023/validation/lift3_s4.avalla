scenario lift3_s4
load lift3.asm
invariant neverDown: dir(lift1) != DOWN;

exec //set floor requests (all ext. buttons UP and DOWN pushed)
   forall $i in Floor with true do
     par
       hasToDeliverAt(lift1, $i) := false
       if $i != top then existsCallFromTo($i, UP) := true endif
       if $i != ground then existsCallFromTo($i, DOWN) := true endif
     endpar;
//the lift goes up to floor 4, then goes down
step until ctlState(lift1) = HALTING and floor(lift1) = 4;
// check that the UP-external requests have been satisfied, while the DOWN-requests are still pending
check (forall $i in Floor with existsCallFromTo($i, DOWN) = true);
check (forall $i in Floor with existsCallFromTo($i, UP) = false);
