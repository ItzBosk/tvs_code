MODULE main
VAR
	unlock1 : boolean;
	unlock2 : boolean;
	lock1 : lock(7,TRUE,unlock1);
	lock2 : lock(2,unlock1,unlock2);
	
	--SPEC EF(unlock2);

 MODULE lock(key,previousLock,unlock)
	
	VAR
	digit : 0 .. 9;
	command: {up,down,none};
	
	ASSIGN
	init(digit) := 0;
	next(digit) := case
	    command = none : digit;
		command = up: (digit +1) mod 10;
		command = down: (digit + 9) mod 10;
	esac;
	
	unlock := digit = key & previousLock;
	
	
